# 智能下载路径选择器 (Smart Download Path Selector)
一个轻量、高效的浏览器插件，解决「所有下载文件堆在同一文件夹」的痛点 —— 每次下载前弹出路径选择对话框，让你自由指定保存位置，轻松实现文件分类管理。
# 功能特点
**· 📂 下载前路径自定义**：点击下载链接后自动弹出路径选择框，支持手动输入或选择预设路径

**· ⚡ 常用路径管理**：在设置中添加高频使用路径（如「文档」「图片」「安装包」），后续一键选择

**· 🔍 最近路径记忆**：自动记录最近 10 条使用过的路径，重复下载同类型文件无需重复输入

**· 🎨 Edge 风格 UI**：界面设计贴合 Edge 浏览器视觉风格，操作流畅无违和感

**· 🌐 跨 Chromium 兼容**：完美支持 Edge（88+）、Chrome（88+）等 Chromium 内核浏览器

**· 📱 多设备同步**：通过浏览器账号同步常用路径，在不同设备上保持一致体验

# 安装指南
## 1. 本地开发测试（推荐）

适用于开发者调试或普通用户体验最新功能：

1. 克隆本仓库到本地
```bash
git clone https://github.com/EthanCherry/smart-download-path-selector.git
```
2. 打开 Edge 浏览器，在地址栏输入 edge://extensions/ 并回车

3. 开启右上角「开发者模式」开关（蓝色为开启状态）

4. 点击页面顶部「加载解压缩的扩展」按钮，选择克隆后的仓库文件夹

5. 看到插件列表中出现「智能下载路径选择器」即安装成功，浏览器工具栏会显示插件图标

## 2. 生产环境安装（待上线）

未来将上线 Edge 应用商店和 Chrome 网上应用店，届时可直接搜索插件名称一键安装，无需手动配置。

# 使用方法
## 1. 基础下载流程
1. 在网页中点击任意下载链接（如 PDF、ZIP、安装包等）

2. 自动弹出路径选择对话框，包含 3 种路径选择方式：

**· 常用路径**：点击已添加的预设路径（如「C:\Downloads\ 文档」）
  
**· 最近路径**：选择最近使用过的路径（按时间倒序排列）
  
**· 手动输入**：在输入框中填写自定义路径（支持绝对路径，如「D:\ 素材 \ 图片」）
  
3. 点击「确认下载」按钮，文件将保存到指定路径

4. 如需取消下载，点击「取消」或关闭对话框即可

## 2. 管理常用路径
1. 点击浏览器工具栏中的插件图标（📂 图标）
2. 在弹出的快捷界面中点击「设置」按钮，进入选项页面
3. 在「常用下载路径」区域：

**· 添加路径**：在输入框中填写路径（如「E:\ 软件 \ 安装包」），点击「添加路径」

**· 删除路径**：找到需要删除的路径，点击右侧「删除」按钮

**· 修改路径**：暂不支持直接修改，可删除后重新添加

# 项目结构
```bash
smart-download-path-selector/
├── icons/                  # 插件图标文件夹（必须保留，否则插件无法正常显示）
│   ├── icon16.png          # 16x16像素：浏览器工具栏图标
│   ├── icon48.png          # 48x48像素：扩展管理页面图标
│   └── icon128.png         # 128x128像素：应用商店展示图标
├── manifest.json           # 插件核心配置文件（权限、页面入口、兼容性声明等）
├── background.js           # 后台服务脚本（监听下载事件、控制下载流程）
├── contentScript.js        # 页面内容脚本（检测网页中的下载链接）
├── pathSelector.html       # 路径选择对话框界面（HTML结构）
├── pathSelector.js         # 路径选择对话框逻辑（路径渲染、点击事件、下载触发）
├── popup.html              # 插件快捷界面（点击工具栏图标显示的小窗口）
├── popup.js                # 快捷界面逻辑（跳转设置页面、显示帮助信息）
├── options.html            # 插件设置页面（常用路径管理界面）
└── options.js              # 设置页面逻辑（路径增删、本地存储同步）
```


# 浏览器兼容性
| 浏览器 | 支持版本 | 状态 | 备注 |
|--------|----------|------|------|
| Microsoft Edge | 88.0+ | ✅ 完全支持 | 优先适配，测试最充分|
| Google Chrome | 88.0+ | ✅ 完全支持 | 功能无差异，可直接使用|
| Brave | 1.20+ | ✅ 兼容支持 | 基于 Chromium，无明显问题|
| Firefox | 暂不支持 | ⚠️ 开发中 | 需适配 WebExtension API|
| Safari | 暂不支持 | 📅 计划中 | 需单独适配 Safari 扩展机制|

# 常见问题（FAQ）
### Q1：点击下载链接后，路径选择对话框不弹出怎么办？
#### A1：按以下步骤排查：

检查插件是否已启用：进入 edge://extensions/，确保「智能下载路径选择器」开关为开启状态

重新加载插件：在扩展管理页面，点击插件卡片下方的「重新加载」按钮

清除浏览器缓存：进入 Edge 设置 → 隐私、搜索和服务 → 清除浏览数据，勾选「缓存的图像和文件」后清除

确认下载链接类型：部分通过 JavaScript 动态生成的下载（如某些网盘）可能无法捕获，可尝试右键「链接另存为」触发插件

### Q2：输入的路径不生效，文件还是保存到默认路径？
#### A2：可能是路径格式错误或权限问题：

检查路径格式：确保是绝对路径（如 Windows 系统需包含盘符 C:\，macOS/Linux 需以 / 开头）

验证路径存在性：在文件资源管理器中手动打开输入的路径，确认文件夹已创建

检查写入权限：确保当前用户对该路径有写入权限（如 Windows 系统的「C:\Program Files」目录通常无权限，建议选择「Downloads」或自定义目录）

### Q3：常用路径会同步到其他设备吗？

#### A3：会！插件使用 chrome.storage.sync 存储常用路径和最近记录：

只要在不同设备上登录同一 Edge/Chrome 账号，并开启「扩展同步」功能

常用路径会自动同步，无需手动迁移

最近路径为设备本地记录，不会同步（避免跨设备路径不兼容）

# 开发指南
### 技术栈

前端：HTML5 + CSS3 + JavaScript（ES6+）

扩展框架：Chrome Extension API（兼容 Edge 扩展机制）

存储：chrome.storage.sync（同步存储）+ chrome.storage.local（本地存储）

# 核心逻辑说明

下载事件监听：在 background.js 中通过 chrome.downloads.onDeterminingFilename 监听下载请求，拦截默认下载流程

路径选择触发：拦截后打开 pathSelector.html 对话框，等待用户选择路径

下载执行：用户确认路径后，通过 chrome.downloads.download() 接口指定路径下载文件

路径存储：常用路径和最近路径分别存储在 chrome.storage.sync 和 chrome.storage.local 中，确保数据持久化

# 开发建议

如需修改界面样式：直接编辑各 HTML 文件中的 <style> 标签（如 pathSelector.html 中的对话框样式）

如需调整下载逻辑：重点修改 background.js 中的 onDeterminingFilename 事件处理函数

如需扩展功能（如按文件类型自动推荐路径）：可在 pathSelector.js 中添加文件类型判断逻辑（如 .pdf 自动推荐「文档」路径）

# 联系方式

如遇 Bug、功能建议或使用问题，可通过以下方式反馈：

GitHub Issues：提交问题

邮箱：1582151732_AT_qq.com


**如果觉得这个插件对你有帮助，欢迎在 GitHub 上给个 ⭐️ 鼓励！**

